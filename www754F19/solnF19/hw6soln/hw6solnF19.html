<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <!--
This HTML was auto-generated from MATLAB code.To make changes, update the MATLAB code and republish this document.
      -->
    <title>HW 6 Solution - ISE 754 Fall 2019</title>
    <meta name="generator" content="MATLAB 9.6">
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
    <meta name="DC.date" content="2019-10-09">
    <meta name="DC.source" content="hw6solnF19.m">
    <style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style>
  </head>
  <body>
    <div class="content">
      <h1>HW 6 Solution - ISE 754 Fall 2019</h1>
      <!--introduction--><!--/introduction-->
      <h2>Contents</h2>
      <div>
        <ul>
          <li><a href="#1">Question 1</a></li>
          <li><a href="#5">Question 2</a></li>
          <li><a href="#10">Question 3</a></li>
          <li><a href="#15">Question 4</a></li>
          <li><a href="#16">Question 5</a></li>
          <li><a href="#20">Question 6</a></li>
        </ul>
      </div>
      <h2 id="1">Question 1</h2>
      <h2 id="2">LTL estimation formula</h2>
      <pre class="codeinput">d = 532;
s = 70/20
q = 25*70/2000
ppiLTL = 144.3
rLTL = rateLTL(q,s,d,ppiLTL)
c_LTL = rLTL*q*d
</pre>
      <pre class="codeoutput">s =
    3.5000
q =
    0.8750
ppiLTL =
  144.3000
rLTL =
    3.1039
c_LTL =
   1.4449e+03
</pre>
      <h2 id="3">LTL tariff</h2>
      <pre class="codeinput">disc = 0; MC = 95.23;
cl = [500 400 300 250 200 175 150 125 110 100 92.5 85 77.5 70 65 60 55 50];
cl_avg = [0.52 1.49 2.49 3.49 4.49 5.49 6.49 7.49 8.49 9.72 11.22 12.72 <span class="keyword">...</span>
   14.22 18.01 25.5 32.16 39.68 56.18];
class = cl(argmin(dists(s,cl_avg')))
qB = [0 0.25 0.5 1 2.5 5 10 15 20 Inf];
i = find(qB(1:end-1) &lt;= q &amp; q &lt; qB(2:end))
ODi = 124.23
ci = ODi*20*q
ODiplus1 = 101.83
qBi = qB(i+1)
ciplus1 = ODiplus1*20*qBi
c_tar = (1 - disc)*max(MC,min(ci,ciplus1))
</pre>
      <pre class="codeoutput">class =
   250
i =
     3
ODi =
  124.2300
ci =
   2.1740e+03
ODiplus1 =
  101.8300
qBi =
     1
ciplus1 =
   2.0366e+03
c_tar =
   2.0366e+03
</pre>
      <h2 id="4">Difference</h2>
      <pre class="codeinput">rat = c_tar/c_LTL;
fprintf(<span class="string">'Tariff is %d%% %s than formula.\n'</span>,<span class="keyword">...</span>
   round(100*(iff(rat&gt;1,rat-1,1-rat))),iff(rat&gt;1,<span class="string">'higher'</span>,<span
class="string">'lower'</span>))
</pre>
      <pre class="codeoutput">Tariff is 41% higher than formula.
</pre>
      <h2 id="5">Question 2</h2>
      <h2 id="6">Create shipment</h2>
      <pre class="codeinput">sh = vec2struct(<span class="string">'f'</span>,75,<span
class="string">'d'</span>,625,<span class="string">'s'</span>,12,<span class="string">'v'</span>,12000,<span
class="string">'h'</span>,.3,<span class="string">'a'</span>,1);
sdisp(sh)
ppiTL = 123.4, ppiLTL = 141.4,
tr.r = 2*(ppiTL/102.7); tr.Kwt = 25; tr.Kcu = 2750;
</pre>
      <pre class="codeoutput"> 
sh:      1    
--:-----------
 f:      75.00
 d:     625.00
 s:      12.00
 v:  12,000.00
 h:       0.30
 a:       1.00
ppiTL =
  123.4000
ppiLTL =
  141.4000
</pre>
      <h2 id="7">Current TLC</h2>
      <pre class="codeinput">[TLC,q,isLTL] = minTLC(sh,tr,ppiLTL)
tdays = 365.25*q/sh.f
</pre>
      <pre class="codeoutput">TLC =
   4.0275e+04
q =
    5.5938
isLTL =
  logical
   0
tdays =
   27.2418
</pre>
      <h2 id="8">Interval limited shipment</h2>
      <pre class="codeinput">q1wk = 7*sh.f/365.25
[c,isLTL,cTL,cLTL] = transcharge(q1wk,sh,tr,ppiLTL)
[TLC1wk,TC,IC] = totlogcost(q1wk,c,sh)
</pre>
      <pre class="codeoutput">q1wk =
    1.4374
c =
  861.6451
isLTL =
  logical
   1
cTL =
   1.5019e+03
cLTL =
  861.6451
TLC1wk =
   5.0134e+04
TC =
   4.4959e+04
IC =
   5.1745e+03
</pre>
      <h2 id="9">Impact on TLC</h2>
      <pre class="codeinput">increase_in_TLC = TLC1wk - TLC
</pre>
      <pre class="codeoutput">increase_in_TLC =
   9.8586e+03
</pre>
      <h2 id="10">Question 3</h2>
      <h2 id="11">Create shipments 1 (A) and 2 (B)</h2>
      <pre class="codeinput">uwt = [24 45];         <span class="comment">% unit weight (lb)</span>
ucu = [12 4];          <span class="comment">% unit cube (ft^3)</span>
udem = [1000 1200];    <span class="comment">% unit annual demand</span>
uval = [30 45];        <span class="comment">% unit value ($)</span>
a = 0.5;               <span class="comment">% alpha batch prod, constant consumption</span>
th = [2 3];            <span class="comment">% years when product loses xh% of original value</span>
clear <span class="string">sh</span>
sh = vec2struct(<span class="string">'d'</span>,500,<span class="string">'f'</span>,udem.*uwt/2000,<span
class="string">'s'</span>,uwt./ucu,<span class="keyword">...</span>
   <span class="string">'a'</span>,a,<span class="string">'v'</span>,uval./(uwt/2000),<span
class="string">'h'</span>,0.04+0.06+0.6./th);
tr = struct(<span class="string">'r'</span>,2,<span class="string">'Kwt'</span>,25,<span
class="string">'Kcu'</span>,2750);
sdisp(sh)
</pre>
      <pre class="codeoutput"> 
sh:   d    f    s     a     v     h 
--:---------------------------------
 1:  500  12   2.00  0.5  2,500  0.4
 2:  500  27  11.25  0.5  2,000  0.3
</pre>
      <h2 id="12">Determine optimal TL</h2>
      <pre class="codeinput">[TLC,q] = minTLC(sh,tr);
vdisp(<span class="string">'TLC,q'</span>)
</pre>
      <pre class="codeoutput"> 
 :     TLC      q 
-:----------------
1:  5,738.64  2.75
2:  5,692.10  9.49
</pre>
      <h2 id="13">Create aggregate shipment AB</h2>
      <pre class="codeinput">ash = aggshmt(sh);
sdisp(ash)
[TLCa,qa] = minTLC(ash,tr);
vdisp(<span class="string">'TLCa,qa'</span>)
</pre>
      <pre class="codeoutput"> 
ash:      1   
---:----------
  d:    500.00
  f:     39.00
  s:      4.64
  a:      0.50
  v:  2,153.85
  h:      0.33
 
 :    TLCa     qa 
-:----------------
1:  8,383.13  6.38
</pre>
      <h2 id="14">Percentage change in TLC from A + B to AB</h2>
      <pre class="codeinput">pctchg = 100*(TLCa - sum(TLC))/sum(TLC)
</pre>
      <pre class="codeoutput">pctchg =
  -26.6615
</pre>
      <h2 id="15">Question 4</h2>
      <pre class="codeinput">city = {<span class="string">'Asheville'</span>,<span
class="string">'Statesville'</span>,<span class="string">'Winston-Salem'</span>,<span
class="string">'Greensboro'</span>,<span class="keyword">...</span>
   <span class="string">'Durham'</span>,<span class="string">'Raleigh'</span>,<span
class="string">'Wilmington'</span>};  <span class="comment">% City name cell array</span>
P = [50 150 190 220 270 295 420]'; <span class="comment">% I-40 mile marker</span>
shS = vec2struct(<span class="string">'f'</span>,[400 120],<span class="string">'s'</span>,[100 50]./[25 5]);
shC = aggshmt(shS);
shC = vec2struct(shC,<span class="string">'f'</span>,shC.f*[20 25 30 15 10]/100);
sh = [shS shC];
sdisp(sh)
qmax = maxpayld(sh,struct(<span class="string">'Kcu'</span>,2750,<span class="string">'Kwt'</span>,25));
n = [sh.f]./qmax;
vdisp(<span class="string">'qmax,n'</span>)
x = minisumloc(P([2 7 1 3 4 5 6]),n,1)
fprintf(<span class="string">'Locate DC in %s\n'</span>,city{argmin(dists(x,P))})
</pre>
      <pre class="codeoutput"> 
sh:   f     s  
--:------------
 1:  400   4.00
 2:  120  10.00
 3:  104   4.64
 4:  130   4.64
 5:  156   4.64
 6:   78   4.64
 7:   52   4.64
 
 :   qmax    n  
-:--------------
1:   5.50  72.73
2:  13.75   8.73
3:   6.38  16.29
4:   6.38  20.36
5:   6.38  24.44
6:   6.38  12.22
7:   6.38   8.15
x =
  150.0000
Locate DC in Statesville
</pre>
      <h2 id="16">Question 5</h2>
      <h2 id="17">Create Data</h2>
      <pre class="codeinput">clear <span class="string">all</span>
city = {<span class="string">'Richmond'</span>,<span class="string">'Canton'</span>,<span
class="string">'Malden'</span>,<span class="string">'Tyler'</span>};
st = {<span class="string">'CA'</span>,<span class="string">'OH'</span>,<span class="string">'MA'</span>,<span
class="string">'TX'</span>};
zip = [72118 55372 15010 88012 87301 73099];
ud = [1600 1600 2200 1200 2600 1500];
cu = [2.7 1.3 2.7 3.6];
wt = [8 14 4 29];
BOM = [4 3 1 4];
cuFG = 38.2; wtFG = 175;
</pre>
      <h2 id="18">Geolocate</h2>
      <pre class="codeinput">city2lonlat = @(city,st) <span class="keyword">...</span>
   uscity(<span class="string">'XY'</span>,mand(city,uscity(<span class="string">'Name'</span>),st,uscity(<span
class="string">'ST'</span>)));
<span class="keyword">for</span> i = 1:length(city)
   XYP(i,:) = city2lonlat(city{i},st{i});
<span class="keyword">end</span>
XYC = uszip5(<span class="string">'XY'</span>,mand(zip,uszip5(<span class="string">'Code5'</span>)));
</pre>
      <h2 id="19">Determine Location</h2>
      <pre class="codeinput">tr.Kcu = 2750; tr.Kwt = 25;
fout = ud*wtFG/2000
qmaxFG = maxpayld(wtFG/cuFG,tr)
wout = fout/qmaxFG
fin = (BOM*sum(ud)).*wt/2000
qmax = maxpayld(wt./cu,tr)
win = fin./qmax
xy = minisumloc([XYP; XYC],[win wout],<span class="string">'mi'</span>)
cityst = uscity50k;
idx = lonlat2city(xy,cityst);
fprintf(<span class="string">'Locate NF in %s, %s.\n'</span>,cityst.Name{idx},cityst.ST{idx})
</pre>
      <pre class="codeoutput">fout =
  140.0000  140.0000  192.5000  105.0000  227.5000  131.2500
qmaxFG =
    6.2991
wout =
   22.2255   22.2255   30.5600   16.6691   36.1164   20.8364
fin =
  171.2000  224.7000   21.4000  620.6000
qmax =
    4.0741   14.8077    2.0370   11.0764
win =
   42.0218   15.1745   10.5055   56.0291
xy =
  -97.7717   35.5252
Locate NF in Oklahoma City, OK.
</pre>
      <h2 id="20">Question 6</h2>
      <h2 id="21">Read data</h2>
      <pre class="codeinput">fn = <span class="string">'HW6data.xlsx'</span>;
inS = table2struct(readtable(fn,<span class="string">'Sheet'</span>,<span class="string">'Supplier'</span>));
inC = table2struct(readtable(fn,<span class="string">'Sheet'</span>,<span class="string">'Customer'</span>));
UD = xlsread(fn,<span class="string">'Demand'</span>);
sdisp(inS),sdisp(inC),mdisp(UD)
</pre>
      <pre class="codeoutput"> 
inS:    zip    cu     wt     uc      sv  
---:-------------------------------------
  1:  43,229  0.89   7.84   63.28   47.75
  2:  27,302  1.00   6.60    4.00    2.85
  3:  29,501  0.67   2.59    6.69    3.78
  4:  30,253  0.67   0.89   31.50   29.07
  5:  28,607  1.33  15.65   78.77   65.22
  6:  25,901  2.67  35.61  291.91  129.59
  7:   2,492  1.00   7.51   30.84   21.77
  8:  23,222  3.56  52.46  477.48  411.97
  9:  57,006  0.67  14.07   78.40   31.17
 10:  28,277  2.67   5.54   12.97   10.03
 11:  40,204  2.67  33.61   89.67   52.89
 12:   8,901  2.67  16.40   23.78   20.42
 13:   2,131  0.67   2.74   24.68   13.73
 14:  31,705  2.67  29.59  131.79  100.92
 15:  37,042  0.89  17.20   49.44   14.35
 16:  30,329  2.67   3.86    2.40    2.14
 17:  21,532  0.89  14.37   60.80   59.74
 18:  23,229  1.00  16.60   40.44   37.05
 19:  23,237  1.00   7.92    7.84    6.90
 20:  39,209  0.67  11.31   31.35   23.37
 21:  17,603  3.56  86.63   65.77   51.22
 22:  20,852  1.33  33.76   71.98   70.78
 23:   2,114  0.89   0.56   27.74   25.19
 24:   6,076  3.56  48.20  376.61  339.78
 25:  29,418  0.67  15.80   55.06   40.53
 26:  55,108  0.67   5.16   51.38   25.55
 27:  64,772  0.67   2.35   18.37   15.83
 28:  89,102  1.33   9.34   10.84    6.06
 29:   7,011  2.67  20.57   12.27    7.63
 30:  33,147  3.56  43.36  159.20  144.62
 31:  60,505  0.67   1.85   11.68    8.61
 32:  45,342  1.33   9.15    5.81    2.19
 33:  45,344  3.56  14.06    7.44    7.35
 34:  55,119  1.33  19.53  194.74  121.10
 35:  27,106  1.33  54.61   83.83   51.75
 36:  44,118  2.67  22.78  262.23  246.58
 37:  25,705  1.00   4.84   65.11   54.82
 38:  53,215  2.67  34.09   50.84   46.60
 39:  28,304  2.67  37.57   27.62   23.99
 40:  80,503  1.00  20.67   41.28   38.79
 41:   2,364  0.89   3.11    4.76    2.02
 42:  64,056  1.00  11.39  145.42  128.97
 43:  48,227  0.89  11.31   66.89   31.52
 44:  53,711  1.00  11.39   35.04   30.66
 45:  28,792  1.33  11.12    9.16    7.19
 46:  97,361  2.67  20.25  250.34  133.77
 47:  21,853  1.00   4.54   18.62    3.19
 48:  98,033  0.67   5.11   50.96   29.77
 49:  47,265  0.67   5.00   50.02   47.98
 50:  70,560  0.89   4.80   22.91   14.69
 51:   8,876  1.00   2.17   55.60   24.17
 52:  99,203  2.67  11.66  113.03   93.17
 53:  53,403  1.33   3.79   78.55   46.45
 54:  60,649  1.00   2.00   39.44   31.32
 55:  80,504  0.89  32.24   18.49    8.77
 56:  27,587  1.00  15.77   12.83    9.42
 57:  52,804  1.33  10.93   54.21   39.53
 58:  87,114  1.00  12.39   30.21   29.38
 59:  48,152  1.33   3.53    7.58    7.34
 60:  28,206  2.67  27.70  396.16  286.90
 61:  19,966  1.00   9.37   36.63   21.79
 62:  22,310  1.00   0.98    1.42    0.85
 63:  46,013  2.67  43.08  253.42  234.76
 64:  30,344  0.89  18.84   10.84    8.13
 
inC:    zip 
---:--------
  1:  23,113
  2:  23,666
  3:  23,454
  4:  28,097
  5:  20,120
  6:  27,560
  7:  27,606
  8:  27,215
  9:  27,332
 10:  28,451
 11:  24,018
 12:  24,060
 13:  23,185
 14:  24,019
 15:  27,265
 16:  29,730
 17:  29,708
 18:  22,015
 19:  27,330
 20:  28,401
 21:  27,409
 22:  28,216
 23:  28,144
 24:  23,220
 25:  29,928
 26:  27,217
 27:  29,431
 28:  27,524
 
UD:     1      2      3      4      5      6      7      8      9     10    11    12     13     14     15     16     17     18     19     20     21    22    23     24     25     26     27     28 
--:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 1:    251    497    319    255     66    425    185    254     38    281  467    208    569    356    485    501    328    128    138    498    238  293    513    261    415    397    353    474
 2:    126     32    150     42    156    118    116     93     50     46  127     85     89     41    133     91    153    134    162     11     60  128    158     33    168    114    103     79
 3:    386  1,591  1,572  1,534    776  1,595  1,439    751  1,159    563  802    572    827  1,665  1,396    838  1,690     72  1,150    956  1,036  911    747  1,757  1,719  1,111  1,003    757
 4:  1,192  1,071    406    307  1,694    782  1,618    768  1,742    131  750  1,715  1,617    762    144    455    364  1,430  1,003  1,574    600  234  1,226    347  1,575  1,271    230  1,399
 5:     14      3     63    126    136      7    148     32    108     31  161     16    162    148    162    180     65     17    141    134    133    2     47    141     54     50    170    134
 6:     10    159    119    169    185     53    148    110    182    162   61     74    136     70    128    100     60    171     28    137    129  156     75     40     98    138    100     42
 7:      2     10     38     46      1     37     21     32     36      2   27     46     44     46     19     10     42     37     38     24     28   23     23     35     12     39     42     32
 8:    316    196    301    122    255    231    166     34     57    219  316     35     55    230     39      1    371    353    172    220    295   50    346    250    282    222    228    183
 9:     36      1     80    115     85     55     30     62     40    112   74     52     59    119     61      2     86     89    110    125     65  108     50     50    108      8     19     81
10:     45     49     91     88     37     79     31     90      1     39   55     52     90     31     55     64     82     20    113     40    108   14     78    132    119    114     45     87
11:     18      3     37     22     23     40     30     41     10     11   25     10     35     38     10     37     30     40     39     30     34   23      3     23     10     12     39     32
12:     50     87    163     94    103    179    168     38     63     79   76    229      2     13     41      1    187    209    200    165    194  118    206    141     87     49    117    111
13:    250    122    445    627     44    180    580    196    325     73  281    253    384    379    494    671     61    480    476    490    216  546    468    282    597    311    284    191
14:     14     58     24     34     15     62     10     35     60     46   65     11      9     32     27     59     35     37     73     14     48   56     31     75      9     47     63     53
15:    252    173     23    240    183     19    182    268     21     23   19     58    108    103    256    114    180    131    194     61     15  103    181     74    210    173    211     48
16:    140    233    147    104     28    233     76    167    210    257  266    168      7     91    156    214    201    145    236    144     73  149    128    163    285    208     19    196
17:     41     43     32     21     30     31     45     27     41     28   34     15     44     37     35      6     33     27     15      3     42   19      9     48     44     30      8     22
18:    511    400    311    466     20     53    561    467     97    594  515    186     36    502    218    395    291    210    250    203    506  125    458    764    500    363    335    165
19:     70     42    158    110     41    162     45     51     55    114  164     72     20    169     83    106     63     72     75    164     50  135    157    155     38    154     80    101
20:     67  1,850    102    158    523  1,194  1,537    194  1,744    613   94  1,189  1,737  1,550    151    384  1,063  1,760    222  1,159    280  745    405    234    728    171    494      3
21:     22      9     26     21     36     29     32     19     25      0   15     22     21      8     28     14     18     10     32      0     34   21     14     21      8     17     19     32
22:     44    112     24     12    118    154     28      1     80     99   40    111    140      3     70     79     79    118      3     83     28   81     79     54    114    159     46     63
23:    231    232     87     79    185     31    226    196    162     43   87    225    219    242     23     44    232    180     88    149    153  211    239    211    122     96    157    137
24:     19      9     10     52     62      6     31     14     38     17   50      9     24     47     28     48     59     55     31     23      9    3     32     61     23     43     30     14
25:     57     37     87     51     57     86     63     36     44     72   22     11     61     23     10      1     24     63     36     88     33   44      2     27     69     12     25     86
26:     49    191    803    131    834    352    451    549    290    380  132    754    550    302    175      1    388    623    106      1    345  610    167    100    104    266    765    532
27:     93    115     86     19     24     49    113     75    125     32   73      4     31    108     39     10     85     67    128     51     69   47     57     64     78      6     88     91
28:    328    123    185    477    222    363    478    469     49    233  110    413    107    383    310    400    266    131    114     65     14   23     57    119     31    387    222    260
29:    117     78    101     14     79    111     84     57     85      1   88     89    103     61     71     80     97    100     39     26    116   86     67     72    125     74    111     57
30:     12      0     21     15     17      6     24     14     27     32    3     13     18      7     13     26     20     21     21     14     32   10     23      5     30     21     23     14
31:    220  1,120     71  1,106  1,660  1,048    926  1,105    376    743  216    705  1,827  1,156  1,732  1,054    820      3  1,906    223  1,340  920  1,149  1,876    546  1,234     38  1,062
32:    209     98     24     79    100    225     95    139     19     97  127    164    144      3     94      5     65    224    106    101     74  119     61    105    260    151    130     80
33:     29     13     22     46     42      3     21     16     17      3   16     28     45     44      9     36     19     16     24     12     15   27     10     24      6     22     15     12
34:    130    529    484    482    185    215     77    418    458    125  117    332    352    188    497    378    439    164    369    129    454  124     88     12    165     16    293    124
35:      8      8      8     41     60     41     36     57     29     25   44     23     55     11     43     40     50     40      6     16      6   42     23     61     26     62      3     12
36:     12      0     15     16     11     11     14      1     12     12   18      7      1      2      7      3      4     13     17     15     12    4      4      3      6     16     10      7
37:     84      8     79     83    117     22     75     76     51     14   59    120     52     41     51     96     41     26      0     43     15   31     47    107     79     39     79     18
38:     20     56    170     56    152    172     53    209    138    182   57    154    147    118    100      5     36    159    176    131     12  118     18    155     25    184      2     78
39:     67     38    104     42    139     15     47     24    116     42  137     50     65     94     78     95     45     86    153     92      7   88     78    122    131      3    109     90
40:    137    128     58    137     99     57     90    123    128    117   56    136     76     18    121    132    101     44    104    113    127   87     96    164     70     59     49     87
41:     95    168    386     34     21     62    207    204     38    347   18    264    158     29    119    354    344    332      5     86      6   70    345    327    367    262    210    291
42:     34     53     63     20     54     43      9     58     48     64   91     16     12     92     44     91     34     40     81      4     97   37     38     46      4     52     23     99
43:     85    137    129    177    188     15    186    157     69    193   10    126     25    198    148      5    112     17     33      8     16  111     68     82     53    164    109    130
44:     27     68     61    121    100     75     62     76      5      1   55     13     97     30    107     54     57     67     45    124     74   99     70     95     35     15     42     99
45:     23     25     32     37     18     19     32     37     10     31   33     31     13     33     46     27     33     21     48      9     28   19     42     49     38     13     43     19
46:     58     21     42     33     60     28     23     61     33     69   74     58     13      0     37     40      7     14     23     11      9   42     12     72     39     49     46     52
47:    657    769    552    682     83    172    526    165    380    362  520    420     56    284    824    288    349    314    700    265    648  420    616    270    733    261    733    220
48:    295    265    352    232    311    347     49     93    174    271  170     87    126    198    223    115     39     10    182    108     37  236    196     38      8     61     53    215
49:    447    411    794    539    369    838    200    588    503    163  708    376    786     84    101    589    446    140    451    700    138  777    834    242     38    208    673    255
50:    112     51     19     47     59     63     84     58    150     81   12    150    143     75     24    123    125    121     28    125      5   74     45    110    143     85      3     57
51:     17    881    870  1,174    903    907  1,426    143  1,554  1,453  131  1,137     12    878    388    492  1,259    478    350    176  1,359  134  1,561    925     36  1,399  1,478  1,042
52:    568    712    865    949    825    305    389    789     23    127  122    872     71  1,001    224     51    231    261    749    942    569  464  1,002    337    785    311     24    201
53:    298     43    145    249    139    101     34     17    231    114  159    257    189    151    252    128     47    146    125    116    286   25    183     19    231    291     14    311
54:      5      7    166    202    152     78     49      4     40     64   11    194     49     74    113    183     23     18    189    186    199  126    140    202    218    128      1    230
55:    191     66    174    226    133    202    165     29    152     71   83    123     89    152     40    212    110    121     37    104     41  143    213    138     97     49     83    180
56:    237    268    163    370    192     17     24    221    316     97   48     33    140    323     54     69    235    233      9    352     76  359     39    112     48    239    355    354
57:     59     11    133    132     97     36     70     68    102      4  148     81      1    150    131     60    132    138     76      4     78   19     20    115      0    121    143     72
58:     37    210    190      1    191    218    218     20    176    220   36    198    219     67     64    191    202    150    220    166    192   50    164    206     49    215     78    221
59:    382    435    125    422    125    105    160    378     82    447  302    227     47    274    339    325    259    154    171     72    358  375    192    212     97     86     70    125
60:     13     29     31     33     10      2     23     16     36      0    7     15     16     32     21      5     20     33     26     11     19   27     28      2      0     31      4     32
61:     79     25     63    141     48     14     89     77    113    144   23      3     50    112    147    133     50     32     98     74    136   35    108     40    119    134    110     71
62:    154    350    107    103    171    293    215    278    109    139  367    171     48    389     36    111    112    196    208    195    404   24    386    284    354    328    300    184
63:     14      3     10     11     16     13     17      2      7      7   15     11     15      1     17      2      6     12      4      4     12   13      1      7      1      0     14      0
64:     11     78     47     72     28     78     83     35     22     93   67     34     43     87     22     55     60     27      9     79     29   18     40     16     21     29     25      2
</pre>
      <h2 id="22">Geocode locations</h2>
      <pre class="codeinput">city2lonlat = @(city,st) <span class="keyword">...</span>
   uscity(<span class="string">'XY'</span>,mand(city,uscity(<span class="string">'Name'</span>),st,uscity(<span
class="string">'ST'</span>)));
DCstr = {<span class="string">'Durham'</span>,<span class="string">'NC'</span>};
DC = city2lonlat(DCstr{:});
SXY = uszip5(<span class="string">'XY'</span>,mand([inS.zip],uszip5(<span class="string">'Code5'</span>)));
CXY = uszip5(<span class="string">'XY'</span>,mand([inC.zip],uszip5(<span class="string">'Code5'</span>)));
</pre>
      <h2 id="23">Plot</h2>
      <pre class="codeinput">XY = [SXY; DC; CXY];
makemap(XY)
hS = pplot(SXY,<span class="string">'ro'</span>);
hDC = pplot(DC,<span class="string">'gv'</span>);
hC = pplot(CXY,<span class="string">'k.'</span>);
pplot(DC,DCstr(1))
legend([hS hDC hC],{<span class="string">'Suppliers'</span>,<span class="string">'DC'</span>,<span
class="string">'Customers'</span>})
</pre><img src="hw6solnF19_01.png" alt="" hspace="5" vspace="5">
      <h2 id="24">Create shipments</h2>
      <pre class="codeinput">ppiTL = 135.1; <span class="comment">% Sep 2019 (P)</span>
tr = struct(<span class="string">'r'</span>,2*(ppiTL/102.7),<span class="string">'Kwt'</span>,25,<span
class="string">'Kcu'</span>,2750);
F = [inS.wt]'.*UD/2000;
s = [inS.wt]./[inS.cu];
v = 2000*[inS.uc]./[inS.wt];
h_ob = ([inS.uc] - [inS.sv])./[inS.uc];   <span class="comment">% Obsolescence rate</span>
h = 0.05 + 0.06 + h_ob;
in.aO = 0; in.aD = 0.5;
shS = vec2struct(<span class="string">'f'</span>,sum(F,2),<span class="string">'s'</span>,s,<span
class="string">'v'</span>,v,<span class="string">'h'</span>,h,<span class="keyword">...</span>
   <span class="string">'d'</span>,dists(SXY,DC,<span class="string">'mi'</span>)*1.2);
shC = vec2struct(aggshmt(shS),<span class="string">'f'</span>,sum(F,1),<span class="string">'a'</span>,0+in.aD,<span
class="keyword">...</span>
   <span class="string">'d'</span>,dists(DC,CXY,<span class="string">'mi'</span>)*1.2);
in.ppiLTL = 188.3; <span class="comment">% Jan 2019 (P)</span>
</pre>
      <h2 id="25">No cooridination</h2>
      <pre class="codeinput">sh = [vec2struct(shS,<span class="string">'a'</span>,in.aO+0.5) shC];
[NC.TLC,NC.q,NC.isLTL] = minTLC(sh,tr,in.ppiLTL);
NC.t = 365.25*[NC.q]./[sh.f];
vdisp(<span class="string">'NC.TLC,NC.q,NC.t,NC.isLTL'</span>,true,true)
</pre>
      <pre class="codeoutput"> 
     :     NC.TLC      NC.q     NC.t    NC.isLTL
-----:------------------------------------------
    1:     21,664.96    3.78     38.27     0.00 
    2:        803.58    1.67     65.97     0.00 
    3:      9,648.28    3.42     31.82     0.00 
    4:     18,461.17    1.39     43.32     0.00 
    5:      7,474.59    2.63     47.54     0.00 
    6:     26,109.47    2.39     16.13     0.00 
    7:      4,998.48    0.43     52.28     1.00 
    8:     23,863.13    5.30     13.32     0.00 
    9:     15,532.57    0.53     14.69     1.00 
   10:      2,525.31    1.60    114.24     0.00 
   11:      9,183.93    3.31    102.01     0.00 
   12:      6,903.05    8.45    118.82     0.00 
   13:     22,449.98    2.25     61.82     0.00 
   14:     11,602.62    3.78     84.77     0.00 
   15:     20,991.10    4.46     52.22     0.00 
   16:      4,906.82    1.99     84.76     0.00 
   17:      3,167.36    2.94    184.34     0.00 
   18:      7,910.82    8.38     38.79     0.00 
   19:      1,977.06    4.34    148.06     0.00 
   20:     31,955.45   15.81     50.18     0.00 
   21:      4,876.76    9.70    147.86     0.00 
   22:      5,212.45    9.65    103.27     0.00 
   23:      9,009.64    0.13     39.63     1.00 
   24:     15,119.84    4.66     83.32     0.00 
   25:      5,754.61    0.67     25.37     1.00 
   26:     43,820.03    3.59     51.09     0.00 
   27:      6,727.42    1.74    294.90     0.00 
   28:     25,689.14    9.63    118.84     0.00 
   29:      5,930.28   10.18    165.20     0.00 
   30:      8,291.71    5.60    195.79     0.00 
   31:     21,861.68    3.81     57.54     0.00 
   32:      5,672.09    6.10    157.01     0.00 
   33:      1,294.08    5.44    477.19     0.00 
   34:     65,128.57    6.69     34.07     0.00 
   35:      4,272.45    2.82     43.13     0.00 
   36:      4,008.62    0.30     38.16     1.00 
   37:      6,581.47    0.91     88.69     0.00 
   38:     11,090.92   17.58    130.65     0.00 
   39:      2,450.71    6.90     62.23     0.00 
   40:     13,230.07   19.45    253.24     0.00 
   41:      7,996.16    3.81    173.80     0.00 
   42:     10,701.41    0.52     24.63     1.00 
   43:     15,876.74    0.60     14.03     1.00 
   44:      8,260.75    5.71    206.55     0.00 
   45:      1,737.81    3.25    263.50     0.00 
   46:     29,771.09    0.55     19.44     1.00 
   47:     17,761.49    2.30     30.25     0.00 
   48:     30,712.92    0.77     24.59     1.00 
   49:     15,812.71    5.24     61.77     0.00 
   50:     11,249.25    2.51    176.14     0.00 
   51:     45,772.17    1.32     19.73     0.00 
   52:    105,637.35    6.01     27.36     0.00 
   53:     27,081.90    1.26     56.45     0.00 
   54:     12,125.12    0.98    116.51     0.00 
   55:     19,174.08   25.00    165.43     0.00 
   56:      1,731.81    2.83     26.33     0.00 
   57:     14,567.62    3.86    117.11     0.00 
   58:     13,154.75   17.03    240.93     0.00 
   59:      6,010.60    3.64    118.71     0.00 
   60:      6,569.91    0.21     10.66     1.00 
   61:      8,511.49    2.11     72.64     0.00 
   62:      2,495.89    1.35    166.96     0.00 
   63:      4,486.12    0.59     42.83     1.00 
   64:      3,242.67    7.83    250.83     0.00 
   65:     12,965.59    3.02     22.61     0.00 
   66:     16,413.42    3.83     22.11     0.00 
   67:     16,869.28    3.93     23.22     0.00 
   68:     12,722.55    2.97     17.38     0.00 
   69:     18,749.45    4.37     26.25     0.00 
   70:      5,657.19    0.89      5.76     0.00 
   71:      5,641.02    1.31      8.02     0.00 
   72:      6,645.98    1.55     11.42     0.00 
   73:      8,031.03    1.87     12.39     0.00 
   74:     13,289.22    3.10     22.45     0.00 
   75:     11,629.00    2.71     20.98     0.00 
   76:     13,273.96    3.09     21.14     0.00 
   77:     14,629.12    3.41     23.48     0.00 
   78:     13,693.92    3.19     18.64     0.00 
   79:      8,999.94    2.10     16.12     0.00 
   80:     13,229.19    3.08     24.52     0.00 
   81:     14,897.13    3.47     20.67     0.00 
   82:     18,798.79    4.38     26.17     0.00 
   83:      7,102.50    1.66     11.73     0.00 
   84:     13,927.83    3.25     21.43     0.00 
   85:      9,048.39    2.11     14.87     0.00 
   86:     12,519.10    2.92     22.19     0.00 
   87:     11,859.71    2.76     17.36     0.00 
   88:     14,208.95    3.31     21.84     0.00 
   89:     20,562.30    4.79     31.86     0.00 
   90:      6,509.83    1.52     10.69     0.00 
   91:     16,463.57    3.84     27.32     0.00 
   92:      7,967.32    1.86     14.42     0.00 
Total:  1,284,899.41  383.99  6,894.77    11.00 
  Avg:     13,966.30    4.17     74.94     0.12 
</pre>
      <h2 id="26">All cross-docked</h2>
      <pre class="codeinput">sh = [vec2struct(shS,<span class="string">'a'</span>,in.aO+0) shC];
qmax = maxpayld(sh,tr);
TLC0h = @(t) <span class="keyword">...</span>
   totlogcost([sh.f]*t,transcharge([sh.f]*t,sh,tr,in.ppiLTL),sh);
TLCh = @(t) iff(t &gt;= 1/365.25 &amp; [sh.f]*t &lt;= qmax, TLC0h(t), Inf);
tx0 = min(qmax./[sh.f]);
X.t = fminsearch(@(t) sum(TLCh(t)),tx0);
X.q = [sh.f]*X.t;
[~,X.isLTL] = transcharge(X.q,sh,tr,in.ppiLTL);
X.TLC = TLCh(X.t);
vdisp(<span class="string">'X.TLC,X.q,X.isLTL'</span>,true,true)
fprintf(<span class="string">'Cross-docking occurs every %.2f days\n'</span>,365.25*X.t)
</pre>
      <pre class="codeoutput"> 
     :      X.TLC       X.q   X.isLTL
-----:-------------------------------
    1:     15,155.41    2.70    0.00 
    2:        969.01    0.69    0.00 
    3:      5,611.68    2.94    0.00 
    4:     14,616.03    0.88    0.00 
    5:      6,495.13    1.51    0.00 
    6:      7,699.68    4.05    0.00 
    7:      4,778.56    0.22    1.00 
    8:      5,808.50   10.89    0.00 
    9:     12,172.09    0.99    1.00 
   10:      5,272.95    0.38    0.00 
   11:      9,002.48    0.89    1.00 
   12:     16,600.17    1.95    0.00 
   13:     25,368.93    0.99    0.00 
   14:     12,927.27    1.22    1.00 
   15:     17,927.89    2.33    1.00 
   16:     14,365.84    0.64    0.00 
   17:      3,717.75    0.44    1.00 
   18:      5,609.38    5.91    0.00 
   19:      5,350.23    0.80    0.00 
   20:     29,310.88    8.62    0.00 
   21:     11,472.13    1.79    1.00 
   22:      9,838.44    2.56    0.00 
   23:      8,207.83    0.09    1.00 
   24:     15,385.59    1.53    1.00 
   25:      4,811.77    0.73    1.00 
   26:     34,872.96    1.92    1.00 
   27:      7,950.04    0.16    1.00 
   28:     59,122.30    2.22    1.00 
   29:     17,906.59    1.69    0.00 
   30:     10,331.63    0.78    1.00 
   31:     27,093.88    1.81    0.00 
   32:     15,929.76    1.06    1.00 
   33:      9,243.34    0.31    1.00 
   34:     40,562.07    5.37    0.00 
   35:      3,368.21    1.79    0.00 
   36:      3,623.03    0.22    1.00 
   37:      6,156.38    0.28    1.00 
   38:     28,756.61    3.68    0.00 
   39:      2,787.65    3.03    0.00 
   40:     26,090.09    2.10    1.00 
   41:     20,788.83    0.60    1.00 
   42:      9,074.56    0.57    1.00 
   43:     12,202.34    1.17    1.00 
   44:     10,683.68    0.76    1.00 
   45:      4,145.54    0.34    1.00 
   46:     24,528.53    0.78    1.00 
   47:      9,821.25    2.08    0.00 
   48:     26,233.96    0.86    1.00 
   49:     17,851.59    2.32    0.00 
   50:     11,760.06    0.39    1.00 
   51:     16,510.35    1.83    0.00 
   52:     88,986.32    6.01    0.00 
   53:     25,391.25    0.61    1.00 
   54:     13,197.60    0.23    1.00 
   55:     42,063.31    4.13    1.00 
   56:        833.42    2.94    0.00 
   57:     15,643.59    0.90    1.00 
   58:     30,987.70    1.93    1.00 
   59:     21,277.95    0.84    0.00 
   60:      4,441.13    0.54    1.00 
   61:      8,507.18    0.80    1.00 
   62:      9,138.95    0.22    0.00 
   63:      4,145.16    0.38    1.00 
   64:      6,694.88    0.85    1.00 
   65:     13,201.14    3.66    0.00 
   66:     16,787.49    4.73    0.00 
   67:     17,095.95    4.63    0.00 
   68:     14,052.83    4.67    0.00 
   69:     18,765.44    4.55    0.00 
   70:      9,827.45    4.21    0.00 
   71:     10,449.30    4.49    0.00 
   72:      9,349.25    3.71    0.00 
   73:     10,681.70    4.13    0.00 
   74:     13,550.06    3.78    0.00 
   75:     12,040.67    3.53    0.00 
   76:     13,717.06    4.00    0.00 
   77:     14,800.06    3.97    0.00 
   78:     14,712.92    4.68    0.00 
   79:     10,289.47    3.56    0.00 
   80:     13,308.25    3.44    0.00 
   81:     15,486.34    4.60    0.00 
   82:     18,817.27    4.58    0.00 
   83:      9,802.93    3.86    0.00 
   84:     14,344.83    4.14    0.00 
   85:     10,781.38    3.88    0.00 
   86:     12,794.68    3.60    0.00 
   87:     13,106.49    4.36    0.00 
   88:     14,570.44    4.15    0.00 
   89:     20,801.23    4.12    0.00 
   90:      9,598.98    3.88    0.00 
   91:     16,463.59    3.84    0.00 
   92:      9,655.87    3.52    0.00 
Total:  1,376,032.34  228.56   36.00 
  Avg:     14,956.87    2.48    0.39 
Cross-docking occurs every 27.36 days
</pre>
      <p class="footer"><br>
        <a href="https://www.mathworks.com/products/matlab/">Published with
          MATLAB® R2019a</a></p>
    </div>
    <!--
##### SOURCE BEGIN #####%% HW 6 Solution - ISE 754 Fall 2019
%% Question 1
%% LTL estimation formulad = 532;
s = 70/20q = 25*70/2000
ppiLTL = 144.3rLTL = rateLTL(q,s,d,ppiLTL)
c_LTL = rLTL*q*d%% LTL tariff
disc = 0; MC = 95.23;cl = [500 400 300 250 200 175 150 125 110 100 92.5 85 77.5 70 65 60 55 50];
cl_avg = [0.52 1.49 2.49 3.49 4.49 5.49 6.49 7.49 8.49 9.72 11.22 12.72 ...   14.22 18.01 25.5 32.16 39.68 56.18];
class = cl(argmin(dists(s,cl_avg')))qB = [0 0.25 0.5 1 2.5 5 10 15 20 Inf];
i = find(qB(1:end-1) <= q & q < qB(2:end))ODi = 124.23
ci = ODi*20*qODiplus1 = 101.83
qBi = qB(i+1)ciplus1 = ODiplus1*20*qBi
c_tar = (1 - disc)*max(MC,min(ci,ciplus1))%% Difference
rat = c_tar/c_LTL;fprintf('Tariff is %d%% %s than formula.\n',...
   round(100*(iff(rat>1,rat-1,1-rat))),iff(rat>1,'higher','lower'))
%% Question 2%% Create shipment
sh = vec2struct('f',75,'d',625,'s',12,'v',12000,'h',.3,'a',1);sdisp(sh)
ppiTL = 123.4, ppiLTL = 141.4,tr.r = 2*(ppiTL/102.7); tr.Kwt = 25; tr.Kcu = 2750;
%% Current TLC[TLC,q,isLTL] = minTLC(sh,tr,ppiLTL)
tdays = 365.25*q/sh.f%% Interval limited shipment
q1wk = 7*sh.f/365.25[c,isLTL,cTL,cLTL] = transcharge(q1wk,sh,tr,ppiLTL)
[TLC1wk,TC,IC] = totlogcost(q1wk,c,sh)%% Impact on TLC
increase_in_TLC = TLC1wk - TLC
%% Question 3%% Create shipments 1 (A) and 2 (B)
uwt = [24 45];         % unit weight (lb)ucu = [12 4];          % unit cube (ft^3)
udem = [1000 1200];    % unit annual demanduval = [30 45];        % unit value ($)
a = 0.5;               % alpha batch prod, constant consumptionth = [2 3];            % years when product loses xh% of original value
clear shsh = vec2struct('d',500,'f',udem.*uwt/2000,'s',uwt./ucu,...
   'a',a,'v',uval./(uwt/2000),'h',0.04+0.06+0.6./th);tr = struct('r',2,'Kwt',25,'Kcu',2750);
sdisp(sh)%% Determine optimal TL
[TLC,q] = minTLC(sh,tr);vdisp('TLC,q')
%% Create aggregate shipment ABash = aggshmt(sh);
sdisp(ash)[TLCa,qa] = minTLC(ash,tr);
vdisp('TLCa,qa')%% Percentage change in TLC from A + B to AB
pctchg = 100*(TLCa - sum(TLC))/sum(TLC)
%% Question 4city = {'Asheville','Statesville','Winston-Salem','Greensboro',...
   'Durham','Raleigh','Wilmington'};  % City name cell arrayP = [50 150 190 220 270 295 420]'; % I-40 mile marker
shS = vec2struct('f',[400 120],'s',[100 50]./[25 5]);shC = aggshmt(shS);
shC = vec2struct(shC,'f',shC.f*[20 25 30 15 10]/100);sh = [shS shC];
sdisp(sh)qmax = maxpayld(sh,struct('Kcu',2750,'Kwt',25));
n = [sh.f]./qmax;vdisp('qmax,n')
x = minisumloc(P([2 7 1 3 4 5 6]),n,1)fprintf('Locate DC in %s\n',city{argmin(dists(x,P))})
%% Question 5
%% Create Dataclear all
city = {'Richmond','Canton','Malden','Tyler'};st = {'CA','OH','MA','TX'};
zip = [72118 55372 15010 88012 87301 73099];ud = [1600 1600 2200 1200 2600 1500];
cu = [2.7 1.3 2.7 3.6];wt = [8 14 4 29];
BOM = [4 3 1 4];cuFG = 38.2; wtFG = 175;
%% Geolocatecity2lonlat = @(city,st) ...
   uscity('XY',mand(city,uscity('Name'),st,uscity('ST')));for i = 1:length(city)
   XYP(i,:) = city2lonlat(city{i},st{i});end
XYC = uszip5('XY',mand(zip,uszip5('Code5')));%% Determine Location
tr.Kcu = 2750; tr.Kwt = 25;fout = ud*wtFG/2000
qmaxFG = maxpayld(wtFG/cuFG,tr)wout = fout/qmaxFG
fin = (BOM*sum(ud)).*wt/2000qmax = maxpayld(wt./cu,tr)
win = fin./qmaxxy = minisumloc([XYP; XYC],[win wout],'mi')
cityst = uscity50k;idx = lonlat2city(xy,cityst);
fprintf('Locate NF in %s, %s.\n',cityst.Name{idx},cityst.ST{idx})
%% Question 6%% Read data
fn = 'HW6data.xlsx';inS = table2struct(readtable(fn,'Sheet','Supplier'));
inC = table2struct(readtable(fn,'Sheet','Customer'));UD = xlsread(fn,'Demand');
sdisp(inS),sdisp(inC),mdisp(UD)%% Geocode locations
city2lonlat = @(city,st) ...   uscity('XY',mand(city,uscity('Name'),st,uscity('ST')));
DCstr = {'Durham','NC'};DC = city2lonlat(DCstr{:});
SXY = uszip5('XY',mand([inS.zip],uszip5('Code5')));CXY = uszip5('XY',mand([inC.zip],uszip5('Code5')));
%% PlotXY = [SXY; DC; CXY];
makemap(XY)hS = pplot(SXY,'ro');
hDC = pplot(DC,'gv');hC = pplot(CXY,'k.');
pplot(DC,DCstr(1))legend([hS hDC hC],{'Suppliers','DC','Customers'})
%% Create shipmentsppiTL = 135.1; % Sep 2019 (P)
tr = struct('r',2*(ppiTL/102.7),'Kwt',25,'Kcu',2750);F = [inS.wt]'.*UD/2000;
s = [inS.wt]./[inS.cu];v = 2000*[inS.uc]./[inS.wt];
h_ob = ([inS.uc] - [inS.sv])./[inS.uc];   % Obsolescence rateh = 0.05 + 0.06 + h_ob;
in.aO = 0; in.aD = 0.5;shS = vec2struct('f',sum(F,2),'s',s,'v',v,'h',h,...
   'd',dists(SXY,DC,'mi')*1.2);shC = vec2struct(aggshmt(shS),'f',sum(F,1),'a',0+in.aD,...
   'd',dists(DC,CXY,'mi')*1.2);in.ppiLTL = 188.3; % Jan 2019 (P)
%% No cooridinationsh = [vec2struct(shS,'a',in.aO+0.5) shC];
[NC.TLC,NC.q,NC.isLTL] = minTLC(sh,tr,in.ppiLTL);NC.t = 365.25*[NC.q]./[sh.f];
vdisp('NC.TLC,NC.q,NC.t,NC.isLTL',true,true)%% All cross-docked
sh = [vec2struct(shS,'a',in.aO+0) shC];qmax = maxpayld(sh,tr);
TLC0h = @(t) ...   totlogcost([sh.f]*t,transcharge([sh.f]*t,sh,tr,in.ppiLTL),sh);
TLCh = @(t) iff(t >= 1/365.25 & [sh.f]*t <= qmax, TLC0h(t), Inf);tx0 = min(qmax./[sh.f]);
X.t = fminsearch(@(t) sum(TLCh(t)),tx0);X.q = [sh.f]*X.t;
[~,X.isLTL] = transcharge(X.q,sh,tr,in.ppiLTL);X.TLC = TLCh(X.t);
vdisp('X.TLC,X.q,X.isLTL',true,true)fprintf('Cross-docking occurs every %.2f days\n',365.25*X.t)
##### SOURCE END #####
--></body>
</html>
